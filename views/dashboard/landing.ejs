<div class="row">
    <div class="col-md-12 grid-margin">
      <form class="forms-sample" action="/dash/dashboard" method="post" >
        <div class="row">
          <div class="col-md-4">
            <div class="form-group">
              <label for="exampleInputName1">Department</label>
              <select class="form-control" id="cntr_auth_type" name="cntr_auth_type" required>
                <option value="0">Select Department</option>
                <% if(regauthtypelist.length > 0){
                  var i = 1
                  regauthtypelist.forEach(dt => { %>
                  <option value="<%= dt.controlling_authority_type_id %>" ><%= dt.controlling_authority_type_name %></option>
                    <% }) } %>
              </select>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label for="exampleInputName1">Range Code</label>
                 <select class="form-control" id="range_code" name="range_code" required>
                  <option value="0">Select </option>
                  <% if(ranzelist.length > 0){
                    var i = 1
                    ranzelist.forEach(dt => { %>
                    <option value="<%= dt.range_id %>" ><%= dt.range_name %></option>
                      <% }) } %>
              </select>
            </div>
          </div>
          
          <div class="col-md-4">
            <div class="form-group">
              <label for="exampleInputName1">URBAN/RURAL</label>
                 <select class="form-control" id="urban_rural_flag" name="urban_rural_flag" >
                  <option value="0">Select </option>
                  <option value="U">URBAN</option>
                  <option value="R">RURAL</option>
              </select>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label for="exampleInputName1">Block</label>
              <select class="form-control select2" id="block_id" name="block_id" >
                <option value="0">Select Block </option>
                <% if(blocklist.length > 0){
                  var i = 1
                  blocklist.forEach(dt => { %>
                  <option value="<%= dt.block_id %>" ><%= dt.block_name %></option>
                    <% }) } %>
              </select>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label for="exampleInputName1">Category of Urban Local Body</label>
              <select class="form-control" id="ulb_catg" name="ulb_catg" >
                <option value="0">Select Urban Local Body </option>
                <% if(ulbcatglist.length > 0){
                  var i = 1
                  ulbcatglist.forEach(dt => { %>
                  <option value="<%= dt.ulb_catg_id %>" ><%= dt.ulb_catg_name %></option>
                    <% }) } %>
              </select>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label for="exampleInputName1">Name</label>
                <input type="text" name="socname" class="form-control">
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <br>
              <button class="btn btn-primary">Submit</button>
            </div>
          </div>
        </div>
      </form>
    </div>
</div>
<div class="row">
    <div class="col-lg-12 grid-margin stretch-card">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title">Society List</h4>
            <div class="table-responsive pt-3">
              <table class="table table-striped"  id=""  style="width:100%">
                <thead>
                  <tr>
                    <th class="society_th_1">SL No</th>
                    <th class="society_th_2">Society Name</th>
                    <th class="society_th_3">Range</th>
                    <th class="society_th_4">Zone Code</th>
                    <th class="society_th_5">District Code</th>
                    <th class="society_th_6">Registration Number</th>
                    <th class="society_th_7">Tier Code</th>
                    <th class="society_th_8">Society Type</th>
                  </tr>
                </thead>
                <tbody id="item-list">
                  <% 
                  var i = (page - 1) * 10 + 1; // Calculate starting index for page
                  data.forEach(dt => { %>
                      <tr>
                          <td><%= i++ %></td>
                          <td><a href="/society/edit?id=<%= dt.id %>"><%= dt.cop_soc_name %></a></td>
                          <td><%= dt.soc_type_name %></td>
                          <td><%= dt.soc_type_name %></td>
                          <td><%= dt.soc_type_name %></td>
                          <td><%= dt.soc_type_name %></td>
                          <td>
                            <!-- <a href="/society/edit?id=<%= dt.id %>"> -->
                              <%= dt.cop_soc_name %>
                            <!-- </a> -->
                          </td>
                          <td><%= dt.reg_no %></td>
                      </tr>
                  <% }) %>
                </tbody>
              </table>
           
            <!-- <nav aria-label="Page navigation">
              <ul class="pagination" id="pagination">
                
                  <li class="page-item <%= page === 1 ? 'disabled' : '' %>">
                      <a class="page-link" href="#" data-page="<%= page - 1 %>" aria-label="Previous">
                          <span aria-hidden="true">&laquo;</span>
                      </a>
                  </li>
                  
                
                  <% for (let p = 1; p <= totalPages; p++) { %>
                      <li class="page-item <%= p == page ? 'active' : '' %>">
                          <a class="page-link" href="#" data-page="<%= p %>"><%= p %></a>
                      </li>
                  <% } %>
      
               
                  <li class="page-item <%= page === totalPages ? 'disabled' : '' %>">
                      <a class="page-link" href="#" data-page="<%= page + 1 %>" aria-label="Next">
                          <span aria-hidden="true">&raquo;</span>
                      </a>
                  </li>
              </ul>
          </nav> -->

          
        
            </div>

            <!-- <nav aria-label="Page navigation">
              <ul class="pagination" id="pagination">
                  <li class="page-item <%= page === 1 ? 'disabled' : '' %>">
                      <a class="page-link" href="#" data-page="<%= page - 1 %>" aria-label="Previous">
                          <span aria-hidden="true">&laquo;</span>
                      </a>
                  </li>
                  
                  <% for (let p = 1; p <= totalPages; p++) { %>
                      <li class="page-item <%= p == page ? 'active' : '' %>">
                          <a class="page-link" href="#" data-page="<%= p %>"><%= p %></a>
                      </li>
                  <% } %>
                  
                  <li class="page-item <%= page === totalPages ? 'disabled' : '' %>">
                      <a class="page-link" href="#" data-page="<%= page + 1 %>" aria-label="Next">
                          <span aria-hidden="true">&raquo;</span>
                      </a>
                  </li>
              </ul>
          </nav> -->
          
          </div>
        </div>
      </div>
</div>

<script>

    $(document).ready(function() {
      //$('#pagination span').click(function(event) {
        $(document).on('click', '.page-link', function(event) {
        event.preventDefault(); // Prevent default anchor behavior
             //   const page = $(this).data('page');
             $('#item-list').html('');
               // const page = $(this).val();
                const page = $(this).data('page');
                $.ajax({
                    url: '/dash/socLimitList',
                    type: 'GET',
                    data: { page },
                    success: function(response) {
                        const data = response.data;
                        const totalPages = response.totalPages;
                        let rows = '';
                        let i = $('#item-list tr').length + 1; // Start from the next index

                        data.forEach(dt => {
                            rows += `
                                <tr>
                                    <td>${i++}</td>
                                    <td><a href="/society/edit?id=${dt.id}">${dt.cop_soc_name}</a></td>
                                    <td>${dt.soc_type_name}</td>
                                    <td>${dt.soc_type_name}</td>
                                    <td>${dt.soc_type_name}</td>
                                    <td>${dt.soc_type_name}</td>
                                    <td><a href="/society/edit?id=${dt.id}">${dt.cop_soc_name}</a></td>
                                    <td>${dt.reg_no}</td>
                                </tr>`;
                        });

                        $('#item-list').append(rows); // Append new rows
                     
                        // Update pagination
                let pagination = '';
                
                pagination += `<li class="page-item ${page === 1 ? 'disabled' : ''}">
                    <a class="page-link" href="#" data-page="${page - 1}" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>`;

                for (let p = 1; p <= totalPages; p++) {
                    pagination += `<li class="page-item ${p === page ? 'active' : ''}">
                        <a class="page-link" href="#" data-page="${p}">${p}</a>
                    </li>`;
                }

                pagination += `<li class="page-item ${page === totalPages ? 'disabled' : ''}">
                    <a class="page-link" href="#" data-page="${page + 1}" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>`;

                $('#pagination').html(pagination);

                        // If no more items, hide the button
                        // if (data.length < 10) {
                        //     button.hide();
                        // }
                    },
                    error: function() {
                        alert('Error loading items.');
                    }
                });
            });
        });

</script>
<style>
  #pagination a {
      padding: 5px 10px;
      margin: 0 2px;
      text-decoration: none;
      color: #007bff;
  }
  #pagination a.active {
      font-weight: bold;
      color: #000;
  }
  #pagination a:hover {
      text-decoration: underline;
  }
</style>

