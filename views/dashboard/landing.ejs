<div class="row">
    <div class="col-md-12 grid-margin">
        <div class="row">
          <div class="col-md-4">
            <div class="form-group">
              <label for="exampleInputName1">Department</label>
                 <select class="form-control" id="vill_id" name="vill_id" required>
                  <option value="0">Select </option>
                
              </select>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label for="exampleInputName1">Range Code</label>
                 <select class="form-control" id="vill_id" name="vill_id" required>
                  <option value="0">Select </option>
              </select>
            </div>
          </div>
          
          <div class="col-md-4">
            <div class="form-group">
              <label for="exampleInputName1">URBAN/RURAL</label>
                 <select class="form-control" id="vill_id" name="vill_id" required>
                  <option value="0">Select </option>
              </select>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label for="exampleInputName1">Block</label>
                 <select class="form-control" id="vill_id" name="vill_id" required>
                  <option value="0">Select </option>
              </select>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label for="exampleInputName1">Category of Urban Local Body</label>
                 <select class="form-control" id="vill_id" name="vill_id" required>
                  <option value="0">Select </option>
              </select>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label for="exampleInputName1">Name</label>
                <input type="text" name="socname" class="form-control">
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <br>
              <button class="btn btn-primary">Submit</button>
            </div>
          </div>
           
        </div>
    </div>
</div>
<div class="row">
    <div class="col-lg-12 grid-margin stretch-card">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title">Society List</h4>
            <div class="table-responsive pt-3">
              <table class="table table-striped"  id=""  style="width:100%">
                <thead>
                  <tr>
                    <th>SL No</th>
                    <th>Society Name</th>
                    <th>Range</th>
                    <th>Zone Code</th>
                    <th>District Code</th>
                    <th>Registration Number</th>
                    <th>Tier Code</th>
                    <th>Society Type</th>
                  </tr>
                </thead>
                <tbody id="item-list">
                  <% 
                  var i = (page - 1) * 10 + 1; // Calculate starting index for page
                  data.forEach(dt => { %>
                      <tr>
                          <td><%= i++ %></td>
                          <td><a href="/society/edit?id=<%= dt.id %>"><%= dt.cop_soc_name %></a></td>
                          <td><%= dt.soc_type_name %></td>
                          <td><%= dt.soc_type_name %></td>
                          <td><%= dt.soc_type_name %></td>
                          <td><%= dt.soc_type_name %></td>
                          <td><a href="/society/edit?id=<%= dt.id %>"><%= dt.cop_soc_name %></a></td>
                          <td><%= dt.reg_no %></td>
                      </tr>
                  <% }) %>
                </tbody>
              </table>
           
            <!-- <nav aria-label="Page navigation">
              <ul class="pagination" id="pagination">
                
                  <li class="page-item <%= page === 1 ? 'disabled' : '' %>">
                      <a class="page-link" href="#" data-page="<%= page - 1 %>" aria-label="Previous">
                          <span aria-hidden="true">&laquo;</span>
                      </a>
                  </li>
                  
                
                  <% for (let p = 1; p <= totalPages; p++) { %>
                      <li class="page-item <%= p == page ? 'active' : '' %>">
                          <a class="page-link" href="#" data-page="<%= p %>"><%= p %></a>
                      </li>
                  <% } %>
      
               
                  <li class="page-item <%= page === totalPages ? 'disabled' : '' %>">
                      <a class="page-link" href="#" data-page="<%= page + 1 %>" aria-label="Next">
                          <span aria-hidden="true">&raquo;</span>
                      </a>
                  </li>
              </ul>
          </nav> -->

          <nav aria-label="Page navigation">
            <ul class="pagination" id="pagination">
                <!-- Previous Button -->
                <li class="page-item <%= page === 1 ? 'disabled' : '' %>">
                    <a class="page-link" href="#" data-page="<%= page - 1 %>" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
                
                <!-- Page Numbers -->
                <% for (let p = 1; p <= totalPages; p++) { %>
                    <li class="page-item <%= p == page ? 'active' : '' %>">
                        <a class="page-link" href="#" data-page="<%= p %>"><%= p %></a>
                    </li>
                <% } %>
                
                <!-- Next Button -->
                <li class="page-item <%= page === totalPages ? 'disabled' : '' %>">
                    <a class="page-link" href="#" data-page="<%= page + 1 %>" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            </ul>
        </nav>
        
            </div>
          </div>
        </div>
      </div>
</div>

<script>

    $(document).ready(function() {
      //$('#pagination span').click(function(event) {
        $(document).on('click', '.page-link', function(event) {
        event.preventDefault(); // Prevent default anchor behavior
             //   const page = $(this).data('page');
             $('#item-list').html('');
               // const page = $(this).val();
                const page = $(this).data('page');
                $.ajax({
                    url: '/dash/socLimitList',
                    type: 'GET',
                    data: { page },
                    success: function(response) {
                        const data = response.data;
                        const totalPages = response.totalPages;
                        let rows = '';
                        let i = $('#item-list tr').length + 1; // Start from the next index

                        data.forEach(dt => {
                            rows += `
                                <tr>
                                    <td>${i++}</td>
                                    <td><a href="/society/edit?id=${dt.id}">${dt.cop_soc_name}</a></td>
                                    <td>${dt.soc_type_name}</td>
                                    <td>${dt.soc_type_name}</td>
                                    <td>${dt.soc_type_name}</td>
                                    <td>${dt.soc_type_name}</td>
                                    <td><a href="/society/edit?id=${dt.id}">${dt.cop_soc_name}</a></td>
                                    <td>${dt.reg_no}</td>
                                </tr>`;
                        });

                        $('#item-list').append(rows); // Append new rows
                     
                        // Update pagination
                let pagination = '';
                
                pagination += `<li class="page-item ${page === 1 ? 'disabled' : ''}">
                    <a class="page-link" href="#" data-page="${page - 1}" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>`;

                for (let p = 1; p <= totalPages; p++) {
                    pagination += `<li class="page-item ${p === page ? 'active' : ''}">
                        <a class="page-link" href="#" data-page="${p}">${p}</a>
                    </li>`;
                }

                pagination += `<li class="page-item ${page === totalPages ? 'disabled' : ''}">
                    <a class="page-link" href="#" data-page="${page + 1}" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>`;

                $('#pagination').html(pagination);

                        // If no more items, hide the button
                        // if (data.length < 10) {
                        //     button.hide();
                        // }
                    },
                    error: function() {
                        alert('Error loading items.');
                    }
                });
            });
        });

</script>
<style>
  #pagination a {
      padding: 5px 10px;
      margin: 0 2px;
      text-decoration: none;
      color: #007bff;
  }
  #pagination a.active {
      font-weight: bold;
      color: #000;
  }
  #pagination a:hover {
      text-decoration: underline;
  }
</style>

